<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supplier Search</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Supplier Search</h1>
    </header>
    <label>Enter keywords to search:</label>
    <input type="text" id="input_field" name="input_field" required>
    <button type="submit" id="submit_input" onclick="send_input()">Search</button>
    
    <!-- Container to display the results -->
    <div id="results"></div>

    <script>
        function send_input() {
            fetch("/request_search", {
                method: "POST",
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ value: document.getElementById('input_field').value })
            }).then(response => response.json())
            .then(response => displayResults(response));
        }

        function displayResults(data) {
            const resultsContainer = document.getElementById('results');
            resultsContainer.innerHTML = ''; // Clear previous results

            // Create table
            const table = document.createElement('table');

            // Create table headers
            const headerRow = document.createElement('tr');
            Object.keys(data[0]).forEach(key => {
                const th = document.createElement('th');
                th.innerText = key;
                headerRow.appendChild(th);
            });
            table.appendChild(headerRow);

            // Create table rows
            Object.values(data).forEach(item => {
                const row = document.createElement('tr');
                Object.values(item).forEach(value => {
                    const td = document.createElement('td');
                    td.innerText = value;
                    row.appendChild(td);
                });
                table.appendChild(row);
            });

            resultsContainer.appendChild(table);
        }
    </script>
</body>
</html>
